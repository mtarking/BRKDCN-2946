---
# main playbook

- name: Manage Common and Underlay Configurations
  hosts: spines, leafs
  gather_facts: false

  roles:
    - role: common
    - role: underlay

- name: Manage Overlay Configurations
  hosts: leafs
  gather_facts: false

  roles:
    - role: overlay

- name: Save Running-Config to Startup-Config
  hosts: nxos
  gather_facts: false

  tasks:
    - name: Save Running-Config to Startup-Config
      cisco.nxos.nxos_config:
        save_when: always
